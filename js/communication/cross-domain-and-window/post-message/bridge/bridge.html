<!--
 * @Author: yquanmei
 * @Date: 2022-10
 * @LastEditors: yquanmei
 * @LastEditTime: 2022-10
 * @FilePath: /learn-demo/js/communication/cross-domain-and-window/post-message/bridge/bridge.html
 * @Description: 
 * Copyright (c) 2022 by 用户/公司名, All Rights Reserved. 
-->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>
  <h1>hi</h1>
</body>
<script type="text/javascript">
  window.addEventListener("storage", function (ev) {
    if (ev.key == 'info') {
      window.parent.postMessage({
        key: 'info',
        value: ev.newValue
      }, '*');
    }
  });
  window.addEventListener('message', function (e) {
    if (e.data.key === 'info') {
      // 接受到父文档的消息后，广播给其父级页面
      localStorage.setItem('info', e.data.value);
    }
  });
</script>

</html>